import{g as f,f as C,l as b,m as z,n as E,o as k,c as N,p as B,u as h,q as D,k as Y,s as X,d as c,x as y,b as Z}from"./app-CAEXd_Ep.js";const T={class:"controll"},j={class:"controll__item controll__item--circle"},L={class:"controll__pan controll__item--circle__inner"},M={class:"controll__pan__up controll__item--circle__inner__up"},H={class:"controll__pan__right controll__item--circle__inner__right"},W={class:"controll__pan__down controll__item--circle__inner__down"},$={class:"controll__pan__left controll__item--circle__inner__left"},I={class:"controll__home controll__item controll__item--list-item"},O={class:"controll__zoom-in controll__item controll__item--list-item"},U={class:"controll__zoom-in controll__item controll__item--list-item"},V=C({__name:"ControlButtons",emits:["buttondown","buttonup"],setup(e,{emit:s}){const r=s;function l(a,o){r("buttondown",{key:o})}function t(a,o){r("buttonup",{key:o})}return(a,o)=>(k(),N("div",{id:"v-zoomable-control-btns",class:"controll__buttons",onDblclick:o[31]||(o[31]=y(()=>{},["stop"])),onMousedown:o[32]||(o[32]=y(()=>{},["stop"]))},[c("ul",T,[c("li",j,[c("ul",L,[c("li",M,[c("a",{onPointerdown:o[0]||(o[0]=n=>l(n,"pan-up")),onPointerup:o[1]||(o[1]=n=>t(n,"pan-up")),onPointercancel:o[2]||(o[2]=n=>t(n,"pan-up")),onPointerleave:o[3]||(o[3]=n=>t(n,"pan-up")),onContextmenu:o[4]||(o[4]=y(()=>{},["prevent"]))},o[33]||(o[33]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-up"},[c("polyline",{points:"18 15 12 9 6 15"})],-1)]),32)]),c("li",H,[c("a",{onPointerdown:o[5]||(o[5]=n=>l(n,"pan-right")),onPointerup:o[6]||(o[6]=n=>t(n,"pan-right")),onPointercancel:o[7]||(o[7]=n=>t(n,"pan-right")),onPointerleave:o[8]||(o[8]=n=>t(n,"pan-right")),onContextmenu:o[9]||(o[9]=y(()=>{},["prevent"]))},o[34]||(o[34]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-right"},[c("polyline",{points:"9 18 15 12 9 6"})],-1)]),32)]),c("li",W,[c("a",{onPointerdown:o[10]||(o[10]=n=>l(n,"pan-down")),onPointerup:o[11]||(o[11]=n=>t(n,"pan-down")),onPointercancel:o[12]||(o[12]=n=>t(n,"pan-down")),onPointerleave:o[13]||(o[13]=n=>t(n,"pan-down")),onContextmenu:o[14]||(o[14]=y(()=>{},["prevent"]))},o[35]||(o[35]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-down"},[c("polyline",{points:"6 9 12 15 18 9"})],-1)]),32)]),c("li",$,[c("a",{onPointerdown:o[15]||(o[15]=n=>l(n,"pan-left")),onPointercancel:o[16]||(o[16]=n=>t(n,"pan-left")),onPointerup:o[17]||(o[17]=n=>t(n,"pan-left")),onPointerleave:o[18]||(o[18]=n=>t(n,"pan-left")),onContextmenu:o[19]||(o[19]=y(()=>{},["prevent"]))},o[36]||(o[36]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-left"},[c("polyline",{points:"15 18 9 12 15 6"})],-1)]),32)])])]),c("li",I,[c("a",{onPointerdown:o[20]||(o[20]=n=>l(n,"home"))},o[37]||(o[37]=[Z('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minimize-2" data-v-3ba139de><polyline points="4 14 10 14 10 20" data-v-3ba139de></polyline><polyline points="20 10 14 10 14 4" data-v-3ba139de></polyline><line x1="14" y1="10" x2="21" y2="3" data-v-3ba139de></line><line x1="3" y1="21" x2="10" y2="14" data-v-3ba139de></line></svg>',1)]),32)]),c("li",O,[c("a",{onPointerdown:o[21]||(o[21]=n=>l(n,"zoom-in")),onPointerup:o[22]||(o[22]=n=>t(n,"zoom-in")),onPointercancel:o[23]||(o[23]=n=>t(n,"zoom-in")),onPointerleave:o[24]||(o[24]=n=>t(n,"zoom-in")),onContextmenu:o[25]||(o[25]=y(()=>{},["prevent"]))},o[38]||(o[38]=[Z('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zoom-in" data-v-3ba139de><circle cx="11" cy="11" r="8" data-v-3ba139de></circle><line x1="21" y1="21" x2="16.65" y2="16.65" data-v-3ba139de></line><line x1="11" y1="8" x2="11" y2="14" data-v-3ba139de></line><line x1="8" y1="11" x2="14" y2="11" data-v-3ba139de></line></svg>',1)]),32)]),c("li",U,[c("a",{onPointerdown:o[26]||(o[26]=n=>l(n,"zoom-out")),onPointerup:o[27]||(o[27]=n=>t(n,"zoom-out")),onPointercancel:o[28]||(o[28]=n=>t(n,"zoom-out")),onPointerleave:o[29]||(o[29]=n=>t(n,"zoom-out")),onContextmenu:o[30]||(o[30]=y(()=>{},["prevent"]))},o[39]||(o[39]=[c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-zoom-out"},[c("circle",{cx:"11",cy:"11",r:"8"}),c("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),c("line",{x1:"8",y1:"11",x2:"14",y2:"11"})],-1)]),32)])])],32))}}),S=(e,s)=>{const r=e.__vccOpts||e;for(const[l,t]of s)r[l]=t;return r},q=S(V,[["__scopeId","data-v-3ba139de"]]),i={pan:f({x:0,y:0}),zoom:f(0),origin:f({x:0,y:0})};function x(e,s){E(()=>{i.zoom.value=e.minZoom,i.pan.value={x:e.pan!=null?e.pan.x:e.initialPanX,y:e.pan!=null?e.pan.y:e.initialPanY},e.zoom?i.zoom.value=e.zoom:e.initialZoom>=e.minZoom&&e.initialZoom<=e.maxZoom&&(i.zoom.value=e.initialZoom)}),z(()=>e.zoom,()=>{isNaN(e.zoom)||(i.zoom.value=e.zoom)}),z(()=>e.pan,()=>{e.pan&&(i.pan.value.x=e.pan.x,i.pan.value.y=e.pan.y)},{deep:!0});function r(a,o){if(isNaN(a))return;const n=i.zoom.value;let d=i.zoom.value+a;if(d>e.maxZoom?d=e.maxZoom:d<e.minZoom&&(d=e.minZoom),n!==d){i.zoom.value=d;let u={zoom:i.zoom.value,pan:{x:i.pan.value.x,y:i.pan.value.y,deltaX:0,deltaY:0},type:o};s("zoom",u)}}function l(a,o,n){isNaN(a)&&(a=0),isNaN(o)&&(o=0),i.pan.value={x:i.pan.value.x+a,y:i.pan.value.y+o};let d={zoom:i.zoom.value,pan:{x:i.pan.value.x,y:i.pan.value.y,deltaX:a,deltaY:o},type:n};s("panned",d)}function t(a){i.zoom.value=e.initialZoom,s("zoom",{zoom:i.zoom.value,pan:{x:i.pan.value.x,y:i.pan.value.y,deltaX:0,deltaY:0},type:a});let o={x:e.initialPanX-i.pan.value.x,y:e.initialPanY-i.pan.value.y};i.pan.value={x:e.initialPanX,y:e.initialPanY},s("panned",{zoom:i.zoom.value,pan:{x:i.pan.value.x,y:i.pan.value.y,deltaX:o.x,deltaY:o.y},type:a})}return{zoom:b(()=>i.zoom.value),pan:b(()=>i.pan.value),setZoom:a=>{i.zoom.value=a},setPan:a=>{i.pan.value=a},changeZoom:r,changePan:l,goHome:t}}function A(){let e=0;function s(l,t,a,o){l(),e=window.setTimeout(()=>{e=window.setInterval(()=>{t()},o)},a)}function r(){e&&(window.clearInterval(e),e=0)}return{startHold:s,clearHold:r}}const w="control-btn";function F(e,s){let r=A();const l=x(e,s);function t(u){r.startHold(()=>{l.changeZoom(u*e.buttonZoomStep*.5,w)},()=>{l.changeZoom(u*e.buttonZoomStep*.5,w)},300,50)}function a(u){if(!e.disabled)switch(console.log(u),u.key){case"home":d();break;case"zoom-in":t(1);break;case"zoom-out":t(-1);break;case"pan-left":n({x:1,y:0});break;case"pan-right":n({x:-1,y:0});break;case"pan-up":n({x:0,y:1});break;case"pan-down":n({x:0,y:-1});break}}function o(u){r.clearHold()}function n(u){r.startHold(()=>{l.changePan(u.x*e.buttonPanStep,u.y*e.buttonPanStep,w)},()=>{l.changePan(u.x*e.buttonPanStep,u.y*e.buttonPanStep,w)},300,50)}function d(){l.goHome(w)}return{onButtonDown:a,onButtonUp:o}}function G(e,s){let r=x(e,s),l={x:0,y:0};function t(n){e.disabled||n.pointerType!=="mouse"||!e.mouseEnabled||(l={x:n.clientX,y:n.clientY},document.addEventListener("pointermove",o,{passive:!1}),document.addEventListener("pointerup",function(d){document.removeEventListener("pointermove",o)}),document.addEventListener("pointerleave",function(d){document.removeEventListener("pointermove",o)}),document.addEventListener("pointercancel",function(d){document.removeEventListener("pointermove",o)}))}function a(){e.disabled||!e.dblClickEnabled||!e.zoomEnabled||r.changeZoom(e.dblClickZoomStep,"dblClick")}function o(n){if(e.disabled||!e.panEnabled||n.pointerType!=="mouse"||!e.mouseEnabled)return;let d={x:n.clientX-l.x,y:n.clientY-l.y};r.changePan(d.x,d.y,n.pointerType),l={x:n.clientX,y:n.clientY},n.preventDefault()}return{onPointerDown:t,onDblClick:a}}function J(e,s){let r=x(e,s),l=f({}),t=f(0),a=null;function o(u){if(e.disabled||!e.touchEnabled||!e.panEnabled&&!e.zoomEnabled||(u.preventDefault(),u.touches.length<1))return;console.log("TouchMove: ",u,r.pan.value);const p=u.touches.item(0);if(!p)return;let m=0,v={x:p.clientX,y:p.clientY};if(u.touches.length===2){const _=u.touches.item(1);let g=n({x:p?p.clientX:0,y:p?p.clientY:0},{x:_?_.clientX:0,y:_?_.clientY:0});t.value<=0?(t.value=g.distance,m=0):(m=g.distance/t.value*r.zoom.value-r.zoom.value,t.value=g.distance),v=g.center}if(e.zoomEnabled&&r.changeZoom(m,"touch"),console.log("TouchMovePan: ",a,v,r.pan.value),a===null){a={x:v.x,y:v.y};return}const P={x:v.x-a.x,y:v.y-a.y};e.panEnabled&&r.changePan(P.x,P.y,"touch"),a={x:v.x,y:v.y}}function n(u,p){let m=Math.sqrt(Math.pow(u.x-p.x,2)+Math.pow(u.y-p.y,2)),v={x:(u.x+p.x)/2,y:(u.y+p.y)/2};return{distance:m,center:v}}function d(u){e.disabled||!e.touchEnabled||(a=null,document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("touchend",function(p){u.touches.length<2&&(t.value=-1),document.removeEventListener("touchmove",o)}))}return{onTouchStart:d,touchCount:b(()=>Object.keys(l.value).length)}}function K(e,s){let{changeZoom:r}=x(e,s);function l(t){if(e.disabled||!e.wheelEnabled||!e.zoomEnabled)return;const a=e.wheelZoomStep*-1*t.deltaY/Math.abs(t.deltaY);r(a,"wheel"),t.preventDefault()}return{onWheel:l}}function Q(e,s){const r=J(e,s),l=K(e,s),t=G(e,s),a=F(e,s),o=x(e,s);return{zoom:o.zoom,pan:o.pan,setZoom:o.setZoom,setPan:o.setPan,onWheel:l.onWheel,onTouchStart:r.onTouchStart,onButtonUp:a.onButtonUp,onButtonDown:a.onButtonDown,onPointerDown:t.onPointerDown,onDblClick:t.onDblClick}}const R=C({__name:"VueZoomable",props:{zoom:{type:Number,default:null},pan:{type:Object,default:null},selector:{type:String,default:"* > *"},maxZoom:{type:Number,default:3},minZoom:{type:Number,default:.5},initialPanX:{type:Number,default:0},initialPanY:{type:Number,default:0},initialZoom:{type:Number,default:.5},dblClickZoomStep:{type:Number,default:.4},wheelZoomStep:{type:Number,default:.4},panEnabled:{type:Boolean,default:!0},zoomEnabled:{type:Boolean,default:!0},mouseEnabled:{type:Boolean,default:!0},touchEnabled:{type:Boolean,default:!0},dblClickEnabled:{type:Boolean,default:!0},wheelEnabled:{type:Boolean,default:!0},enableControlButton:{type:Boolean,default:!0},buttonPanStep:{type:Number,default:15},buttonZoomStep:{type:Number,default:.1},disabled:{type:Boolean,default:!1}},emits:["panned","zoom","update:zoom","update:pan"],setup(e,{emit:s}){let r=s,l=e,t=f(),a=b(()=>{var p;return(p=t.value)==null?void 0:p.querySelector(l.selector)}),o=Q(l,n);function n(p,m){p==="zoom"?r("update:zoom",m.zoom):p==="panned"&&r("update:pan",m.pan),r(p,m)}let d=b(()=>`translate(${o.pan.value.x}px, ${o.pan.value.y}px) scale(${o.zoom.value})`);function u(){a.value&&(a.value.style.transform=d.value,a.value.style.transition="transform 0.06s ease-out",a.value.style.transformOrigin="center center")}return z(d,()=>{u()},{flush:"post"}),E(()=>{u()}),(p,m)=>(k(),N("div",{ref_key:"container",ref:t,class:X(p.$style.container),onDblclick:m[0]||(m[0]=(...v)=>h(o).onDblClick&&h(o).onDblClick(...v)),onPointerdown:m[1]||(m[1]=(...v)=>h(o).onPointerDown&&h(o).onPointerDown(...v)),onWheel:m[2]||(m[2]=(...v)=>h(o).onWheel&&h(o).onWheel(...v)),onTouchstart:m[3]||(m[3]=(...v)=>h(o).onTouchStart&&h(o).onTouchStart(...v))},[B(p.$slots,"default",{},void 0,!0),B(p.$slots,"buttons",{},()=>[h(l).enableControlButton?(k(),D(q,{key:0,onButtondown:h(o).onButtonDown,onButtonup:h(o).onButtonUp},null,8,["onButtondown","onButtonup"])):Y("",!0)],!0)],34))}}),oo="_container_1ebwe_2",eo="_buttons_1ebwe_10",no={container:oo,buttons:eo},to={$style:no},lo=S(R,[["__cssModules",to],["__scopeId","data-v-8832125a"]]);export{lo as m};
